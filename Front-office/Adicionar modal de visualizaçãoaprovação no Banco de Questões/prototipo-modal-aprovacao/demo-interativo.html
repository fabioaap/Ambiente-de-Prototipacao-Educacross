<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéØ Demonsta√ß√£o Interativa - Sistema de Aprova√ß√£o de Quest√µes</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* Estilos espec√≠ficos para a demonstra√ß√£o */
        .demo-container {
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .demo-card {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            text-align: center;
            max-width: 600px;
            width: 100%;
            font-family: 'Montserrat', sans-serif;
        }

        .demo-title {
            font-size: 32px;
            font-weight: 700;
            color: #7367F0;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-family: 'Montserrat', sans-serif;
        }

        .demo-subtitle {
            font-size: 18px;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
            font-family: 'Montserrat', sans-serif;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .feature-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #7367F0;
            text-align: left;
            font-family: 'Montserrat', sans-serif;
        }

        .feature-icon {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .feature-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            font-family: 'Montserrat', sans-serif;
        }

        .feature-desc {
            font-size: 14px;
            color: #666;
            line-height: 1.4;
            font-family: 'Montserrat', sans-serif;
        }

        .demo-button {
            background: linear-gradient(135deg, #7367F0, #9c88ff);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px 10px;
            box-shadow: 0 10px 25px rgba(115, 103, 240, 0.3);
            font-family: 'Montserrat', sans-serif;
        }

        .demo-button:hover {
            filter: brightness(1.08);
        }

        .demo-button:active {
            transform: scale(0.96);
        }

        /* Estilo para bot√£o de pagina√ß√£o desabilitado */
        .pagination-btn:disabled {
            background: #e0e0e0 !important;
            color: #bdbdbd !important;
            cursor: not-allowed !important;
            box-shadow: none !important;
            border: none !important;
            opacity: 0.7;
        }

        /* Remover hover/eleva√ß√£o das alternativas */
        .alternative-item:hover {
            box-shadow: none !important;
            transform: none !important;
        }

        .demo-button.secondary {
            background: linear-gradient(135deg, #28C76F, #48da89);
            box-shadow: 0 10px 25px rgba(40, 199, 111, 0.3);
        }

        .demo-button.secondary:hover {
            box-shadow: 0 15px 35px rgba(40, 199, 111, 0.4);
        }

        .stats-container {
            background: #f1f3f4;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            display: none;
        }

        .stats-title {
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
        }

        .stat-item {
            text-align: center;
            padding: 10px;
            background: white;
            border-radius: 8px;
        }

        .stat-number {
            font-size: 24px;
            font-weight: 700;
            color: #7367F0;
        }

        .stat-label {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .instructions {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            border-left: 4px solid #2196f3;
        }

        .instructions-title {
            font-weight: 600;
            color: #1976d2;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .instructions-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .instructions-list li {
            padding: 8px 0;
            color: #1565c0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        @media (max-width: 768px) {
            .demo-card {
                padding: 30px 20px;
            }

            .demo-title {
                font-size: 24px;
            }

            .features-grid {
                grid-template-columns: 1fr;
            }

            .demo-button {
                padding: 15px 30px;
                font-size: 16px;
                margin: 10px 5px;
            }
        }

        /* === CSS DO MODAL (Importado de modal-questao-aprovacao.css) === */

        /* Vari√°veis CSS */
        :root {
            --primary-color: #7367F0;
            --white-color: #FFFFFF;
            --heading-color: #5E5873;
            --body-text: #6E6B7B;
            --muted-text: #676D7D;
            --danger-color: #EA5455;
            --success-color: #28C76F;
            --secondary-color: #82868B;
            --border-color: #D8D6DE;
            --background-gray: #F8F8F8;
            --danger-bg: rgba(234, 68, 85, 0.12);
            --font-family: 'Montserrat', sans-serif;
            --font-regular: 400;
            --font-bold: 700;
            --font-medium: 500;
            --font-size-body: 14px;
            --font-size-small: 12px;
            --line-height-body: 21px;
            --line-height-small: 18px;
            --spacing-xs: 5px;
            --spacing-sm: 10px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --border-radius-sm: 4px;
            --border-radius-md: 6px;
            --border-radius-lg: 8px;
            --border-radius-xl: 100px;
            --shadow-modal: 0px 4px 18px 0px rgba(47, 43, 61, 0.16);
            --shadow-close-btn: 0px 1px 6px 0px rgba(47, 43, 61, 0.1);
        }

        /* Fallback global para fonte Montserrat */
        body {
            font-family: 'Montserrat', sans-serif;
        }

        /* Modal Overlay */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(44, 44, 44, 0.18);
            z-index: 1000;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            padding: var(--spacing-lg);
            overflow: auto;
        }

        /* Modal Dialog */
        .modal-dialog {
            background: var(--white-color);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-modal);
            width: 100%;
            max-width: 1014px;
            position: relative;
            margin-top: var(--spacing-lg);
            display: flex;
            flex-direction: column;
            max-height: calc(100vh - 48px);
        }

        /* Modal Header */
        .modal-header {
            background: var(--background-gray);
            height: 48px;
            border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0;
            flex-shrink: 0;
        }

        /* Modal Body */
        .modal-body {
            padding: var(--spacing-lg);
            flex: 1;
            overflow-y: auto;
            min-height: 0;
        }

        .modal-content {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        /* Scrollbar */
        .modal-body::-webkit-scrollbar {
            width: 8px;
        }

        .modal-body::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        .modal-body::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }

        /* Se√ß√£o de Informa√ß√µes */
        .info-section {
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-md);
            padding: var(--spacing-sm);
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
        }

        .info-row {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            flex-wrap: wrap;
        }

        .info-label {
            font-weight: var(--font-bold);
            color: var(--muted-text);
            font-family: 'Montserrat', sans-serif;
            font-size: 14px;
            line-height: 21px;
        }

        .info-value {
            font-weight: var(--font-bold);
            font-family: 'Montserrat', sans-serif;
            font-size: 14px;
            line-height: 21px;
        }

        .info-value.primary-color {
            color: var(--primary-color);
        }

        /* Se√ß√µes de Conte√∫do */
        .content-section {
            display: flex;
            flex-direction: column;
        }

        .section-header {
            background: var(--border-color);
            padding: var(--spacing-sm);
            border-radius: var(--border-radius-md) var(--border-radius-md) 0 0;
            font-weight: var(--font-bold);
            color: var(--heading-color);
            border: 1px solid var(--border-color);
            font-family: 'Montserrat', sans-serif;
            font-size: 14px;
            line-height: 21px;
        }

        .section-body {
            border: 1px solid var(--border-color);
            border-top: none;
            border-radius: 0 0 var(--border-radius-md) var(--border-radius-md);
            padding: var(--spacing-sm);
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
        }

        /* Dica para o professor (CSS exato do Figma via MCP) */
        .dica-section {
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            padding: 10px;
            gap: 5px;
            width: 100%;
            border: 1px solid #D8D6DE;
            border-radius: 6px;
            margin-bottom: 16px;
            background: transparent;
        }

        .dica-title-wrapper {
            display: flex;
            flex-direction: column;
            gap: 5px;
            width: 100%;
        }

        .dica-title {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 14px;
            line-height: 21px;
            color: #676D7D;
            margin: 0;
        }

        .dica-text-box {
            background: #FFFFFF;
            border: 1px solid #D8D6DE;
            border-radius: 6px;
            padding: 10px;
            width: 100%;
            box-sizing: border-box;
        }

        .dica-text {
            font-family: 'Montserrat', sans-serif;
            font-weight: 400;
            font-size: 14px;
            line-height: 21px;
            color: #6E6B7B;
            margin: 0;
        }

        .dica-meta-row {
            display: flex;
            gap: 5px;
            align-items: flex-start;
            width: 100%;
        }

        .dica-meta-label {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 14px;
            line-height: 21px;
            color: #676D7D;
            margin: 0;
        }

        .dica-meta-value {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 14px;
            line-height: 21px;
            color: #7367F0;
            margin: 0;
        }

        /* Habilidades e Dificuldade */
        .habilidade-text {
            color: var(--primary-color);
            font-weight: var(--font-regular);
            line-height: var(--line-height-body);
        }

        .difficulty-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 2px var(--spacing-sm);
            border-radius: var(--border-radius-xl);
            font-size: var(--font-size-small);
            font-weight: var(--font-bold);
            line-height: var(--line-height-small);
            width: fit-content;
        }

        .difficulty-high {
            background: var(--danger-bg);
            color: var(--danger-color);
            border: 1px solid var(--danger-color);
        }

        .difficulty-medium {
            background: rgba(255, 159, 67, 0.12);
            color: #FF9F43;
            border: 1px solid #FF9F43;
        }

        .difficulty-low {
            background: rgba(40, 199, 111, 0.12);
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }

        /* Quest√£o */
        .question-section {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
        }

        .question-label {
            font-weight: var(--font-bold);
            color: var(--muted-text);
        }

        .question-text {
            background: var(--white-color);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-md);
            padding: var(--spacing-sm);
            color: var(--body-text);
            line-height: var(--line-height-body);
        }

        /* Alternativas */
        .alternatives-section {
            display: flex;
            flex-direction: column;
        }

        .alternative-item {
            background: var(--white-color);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius-md);
            padding: var(--spacing-sm);
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
        }

        .alternative-item.alternative-correct {
            border-color: var(--success-color);
        }

        .alternative-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--spacing-xs);
        }

        .alternative-label {
            font-weight: var(--font-bold);
            color: var(--muted-text);
            font-size: var(--font-size-body);
        }

        .alternative-badge {
            font-weight: 500;
            font-size: 13px;
            line-height: 20px;
            padding: 2px 10px;
            border-radius: 16px;
            min-width: 24px;
            text-align: center;
            color: var(--white-color);
        }

        .badge-correct {
            background: var(--success-color);
        }

        .badge-incorrect {
            background: var(--secondary-color);
        }

        .alternative-content {
            margin-bottom: var(--spacing-xs);
        }

        .alternative-text {
            background: var(--white-color);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-md);
            padding: var(--spacing-sm);
            color: var(--body-text);
            font-size: var(--font-size-body);
            line-height: var(--line-height-body);
            font-weight: var(--font-regular);
        }

        .alternative-details {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
        }

        .alternative-detail-section {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
        }

        .detail-label {
            font-weight: var(--font-bold);
            color: var(--body-text);
            font-size: var(--font-size-body);
        }

        .detail-text {
            background: var(--white-color);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-md);
            padding: var(--spacing-sm);
            color: var(--body-text);
            font-size: var(--font-size-body);
            line-height: var(--line-height-body);
            font-weight: var(--font-regular);
        }

        /* Modal Footer */
        .modal-footer {
            background: var(--white-color);
            border-top: 1px solid var(--border-color);
            padding: var(--spacing-lg);
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-shrink: 0;
            border-radius: 0 0 var(--border-radius-lg) var(--border-radius-lg);
            flex-wrap: wrap;
        }

        /* Painel de reprova√ß√£o ocupa linha inteira quando expandido */
        .footer-rejection-panel {
            order: 10;
            flex-basis: 100%;
        }

        /* Pagina√ß√£o */
        .pagination-container {
            display: flex;
            align-items: center;
        }

        .pagination-btn {
            background: #f3f2f7;
            border: none;
            cursor: pointer;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .pagination-text {
            font-size: var(--font-size-body);
            font-weight: var(--font-medium);
            color: var(--muted-text);
        }

        /* Bot√£o de Fechar */
        .modal-close {
            position: absolute;
            top: -5px;
            right: -15px;
            width: 30px;
            height: 30px;
            background: var(--white-color);
            border: none;
            border-radius: var(--border-radius-sm);
            box-shadow: var(--shadow-close-btn);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            z-index: 10;
        }

        .modal-close:hover {
            background: #F8F8F8;
        }

        /* === Estilos para contadores de aprova√ß√£o/reprova√ß√£o === */
        .actions-container {
            display: flex;
            gap: 16px;
            align-items: center;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: .5rem;
            padding: .75rem 1.5rem;
            border-radius: 12px;
            color: #fff;
            border: 0;
            cursor: pointer;
            transition: filter .15s ease;
            font: 600 16px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Arial;
        }

        .btn:hover {
            filter: brightness(0.95);
        }

        .btn-reject {
            background: #ef4444;
        }

        .btn-approve {
            background: #6259e8;
        }

        .badge {
            display: inline-flex;
            min-width: 20px;
            height: 20px;
            padding: 0 6px;
            border-radius: 999px;
            align-items: center;
            justify-content: center;
            font: 700 12px/1 system-ui;
            background: rgba(255, 255, 255, .22);
            color: #fff;
        }

        /* Acessibilidade: esconder visivelmente, manter para leitores de tela */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* ========================================
           üéâ ESTILOS DOS TOASTS DE FEEDBACK
           ======================================== */
        .feedback-card {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.94);
            display: none;
            /* √© exibido via JS como flex */
            opacity: 0;
            z-index: 600;
            width: clamp(450px, 54vw, 640px);
            padding: 32px 40px 28px;
            border-radius: 16px;
            background: var(--white-color);
            border: 2px solid var(--primary-color);
            box-shadow: none;
            transition: opacity .25s ease, transform .25s ease;
            align-items: center;
            justify-content: center;
            text-align: center;
            gap: 8px;
        }

        .feedback-card.aprovado {
            border-color: var(--success-color);
            box-shadow: none;
        }

        .feedback-card.reprovado {
            border-color: var(--danger-color);
            box-shadow: none;
        }

        .feedback-card.final {
            border: none;
            box-shadow: none;
        }

        .feedback-ribbon {
            position: absolute;
            top: 0;
            right: 0;
            width: 0;
            height: 0;
            border-top: 18px solid var(--primary-color);
            border-left: 18px solid transparent;
            border-top-right-radius: 4px;
        }

        .feedback-card.aprovado .feedback-ribbon {
            border-top-color: var(--success-color);
        }

        .feedback-card.reprovado .feedback-ribbon {
            border-top-color: var(--danger-color);
        }

        .feedback-card.final .feedback-ribbon {
            display: none;
        }

        /* Remover o "bico" (ribbon) dos toasts aprovado e reprovado */
        .feedback-card.aprovado .feedback-ribbon,
        .feedback-card.reprovado .feedback-ribbon {
            display: none;
        }

        .feedback-icon {
            animation: pulseIcon 1.2s ease-in-out infinite;
        }

        .feedback-message {
            font-weight: 700;
            font-size: 22px;
            line-height: 1.3;
            color: var(--heading-color);
        }

        .feedback-card.aprovado .feedback-message {
            color: var(--success-color);
        }

        .feedback-card.reprovado .feedback-message {
            color: var(--danger-color);
        }

        .feedback-card.final .feedback-message {
            color: var(--primary-color);
        }

        .feedback-sub {
            font-size: 14px;
            color: var(--muted-text);
            max-width: 560px;
        }

        .feedback-progress {
            width: 100%;
            height: 8px;
            background: #f0f0ff;
            border-radius: 9999px;
            overflow: hidden;
            margin-top: 6px;
        }

        .feedback-bar {
            height: 100%;
            width: 0%;
            background: var(--primary-color);
            animation: fillBar .9s ease-in-out forwards;
        }

        .feedback-card.aprovado .feedback-bar {
            background: var(--success-color);
        }

        .feedback-card.reprovado .feedback-bar {
            background: var(--danger-color);
        }

        @keyframes pulseIcon {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.06);
            }
        }

        @keyframes fillBar {
            from {
                width: 0%;
            }

            to {
                width: 100%;
            }
        }

        /* Anima√ß√£o especial para o check final */
        .feedback-icon-animated {
            animation: bounceIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes bounceIn {
            0% {
                transform: scale(0);
                opacity: 0;
            }

            50% {
                transform: scale(1.1);
                opacity: 1;
            }

            100% {
                transform: scale(1);
            }
        }

        .check-circle {
            stroke-dasharray: 63;
            stroke-dashoffset: 63;
            animation: drawCircle 0.6s ease-out forwards;
            animation-delay: 0.1s;
        }

        .check-mark {
            stroke-dasharray: 20;
            stroke-dashoffset: 20;
            animation: drawCheck 0.4s ease-out forwards;
            animation-delay: 0.5s;
        }

        @keyframes drawCircle {
            to {
                stroke-dashoffset: 0;
            }
        }

        @keyframes drawCheck {
            to {
                stroke-dashoffset: 0;
            }
        }

        /* Responsividade para o cart√£o de feedback ampliado */
        @media (max-width: 600px) {
            .feedback-card {
                width: calc(100vw - 32px);
                padding: 24px;
            }

            .feedback-message {
                font-size: 18px;
            }
        }

        /* ========================================
           üö´ PAINEL DE REPROVA√á√ÉO REDESENHADO (CARD ELEVADO)
           ======================================== */
        .footer-rejection-panel {
            width: 100%;
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                opacity 0.3s ease,
                padding 0.3s ease,
                box-shadow 0.3s ease;
            padding: 0;
            margin-top: 0;
            background: white;
            border-radius: 16px 16px 0 0;
            box-shadow: 0 0 0 rgba(234, 84, 85, 0);
        }

        .footer-rejection-panel.expanded {
            max-height: 520px;
            opacity: 1;
            padding: 32px;
            margin-top: 16px;
            box-shadow: 0 -8px 32px rgba(234, 84, 85, 0.12);
            border-top: 4px solid var(--danger-color);
            overflow: visible;
        }

        .rejection-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid #f5f5f5;
        }

        .rejection-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 18px;
            font-weight: 700;
            color: var(--danger-color);
            margin: 0;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .rejection-title svg {
            flex-shrink: 0;
        }

        .btn-close-panel {
            background: #f8f8f8;
            border: none;
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-close-panel:hover {
            background: #ea545510;
            transform: scale(1.1);
        }

        .rejection-body {
            margin-bottom: 24px;
        }

        .rejection-label {
            display: block;
            font-family: 'Montserrat', sans-serif;
            font-size: 15px;
            font-weight: 600;
            color: var(--heading-color);
            margin-bottom: 12px;
        }

        .rejection-label .required {
            color: var(--danger-color);
            margin-left: 4px;
        }

        .rejection-textarea {
            width: 100%;
            padding: 16px;
            border: 2px solid #e8e6f0;
            /* refinado: antes 3px var(--border-color) */
            border-radius: 8px;
            /* antes 12px */
            box-sizing: border-box;
            /* garante largura incluindo borda */
            background-clip: padding-box;
            /* melhora o canto com o handle de resize */
            font-family: 'Montserrat', sans-serif;
            font-size: 15px;
            line-height: 1.6;
            color: var(--body-text);
            resize: vertical;
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            min-height: 120px;
            background: #fafafa;
        }

        .rejection-textarea:focus {
            outline: none;
            /* foco neutro (sem roxo) para acessibilidade */
            border-color: #cfcde0;
            box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.06);
            background: #fff;
        }

        .rejection-textarea:hover:not(:focus) {
            border-color: #d0cee0;
        }

        .rejection-textarea::placeholder {
            color: #b8b8b8;
            font-style: italic;
        }

        .rejection-textarea.invalid {
            /* Sem borda vermelha; apenas mant√©m estilo neutro */
            border-color: #e8e6f0;
            background: #fafafa;
            box-shadow: none;
        }

        /* Contador de caracteres (barra removida) */
        .char-counter-wrapper {
            margin-top: 12px;
            padding: 0 4px;
        }

        .char-counter {
            font-family: 'Montserrat', sans-serif;
            font-size: 13px;
            color: var(--muted-text);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* (Removidos) estilos da barra de progresso */

        .char-counter.valid {
            color: var(--success-color);
            font-weight: 600;
        }

        .char-counter.invalid {
            color: var(--danger-color);
            font-weight: 600;
        }

        .rejection-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            padding-top: 16px;
            border-top: 2px solid #f5f5f5;
        }

        .btn-secondary {
            background: #f3f2f7;
            color: var(--heading-color);
            border: 2px solid transparent;
            transition: all 0.2s;
        }

        .btn-secondary:hover {
            background: #e8e7ef;
            border-color: #d8d6de;
            filter: none;
        }

        #btnConfirmarReprovacao {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        #btnConfirmarReprovacao:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            filter: grayscale(100%);
            transform: scale(0.98);
        }

        #btnConfirmarReprovacao:not(:disabled):hover {
            transform: scale(1.02);
            box-shadow: 0 8px 24px rgba(234, 84, 85, 0.25);
        }

        /* Anima√ß√£o de shake para valida√ß√£o */
        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            10%,
            30%,
            50%,
            70%,
            90% {
                transform: translateX(-4px);
            }

            20%,
            40%,
            60%,
            80% {
                transform: translateX(4px);
            }
        }

        .rejection-textarea.shake {
            animation: shake 0.5s;
        }

        /* Responsividade do painel */
        @media (max-width: 768px) {
            .footer-rejection-panel.expanded {
                max-height: 450px;
                padding: 16px;
            }

            .rejection-actions {
                flex-direction: column;
            }

            .rejection-actions .btn {
                width: 100%;
            }
        }
    </style>
</head>

<body>
    <div style="padding: 40px; text-align: center;">
        <button onclick="abrirModal()"
            style="background: #7367F0; color: white; border: none; padding: 18px 36px; border-radius: 8px; font-size: 20px; cursor: pointer;">
            Abrir Modal de Aprova√ß√£o
        </button>
    </div>
    <!-- Bloco de badge aguardando an√°lise removido -->

    <!-- Incluir o Modal -->
    <div class="modal-overlay" id="modalAprovacao" style="display: none;">
        <div class="modal-dialog">
            <!-- Header do Modal -->
            <div class="modal-header"
                style="background: #f8f8f8; border-top-left-radius: 24px; border-top-right-radius: 24px; padding: 20px 24px; height: 66px; display: flex; align-items: center;">
                <span
                    style="font-family: 'Montserrat', sans-serif; font-weight: 500; font-size: 21px; color: #7367F0;">Revisar
                    quest√µes</span>
            </div>
            <!-- Corpo do Modal -->
            <div class="modal-body">
                <div class="modal-content">
                    <!-- Se√ß√£o: Informa√ß√µes da Quest√£o -->
                    <div class="content-section" style="border: 1px solid #d8d6de; border-radius: 6px; padding: 10px;">
                        <div class="info-row" style="display: flex; gap: 5px; margin-bottom: 10px;">
                            <span class="info-label"
                                style="font-family: 'Montserrat', sans-serif; font-weight: 700; font-size: 14px; color: #676d7d;">Quest√£o:</span>
                            <span class="info-value primary-color"
                                style="font-family: 'Montserrat', sans-serif; font-weight: 700; font-size: 14px; color: #7367F0;"
                                id="questaoNumero">#687</span>
                        </div>
                        <div class="info-row" style="display: flex; gap: 5px; margin-bottom: 10px;">
                            <span class="info-label"
                                style="font-family: 'Montserrat', sans-serif; font-weight: 700; font-size: 14px; color: #676d7d;">√Årea
                                de conhecimento:</span>
                            <span class="info-value primary-color"
                                style="font-family: 'Montserrat', sans-serif; font-weight: 700; font-size: 14px; color: #7367F0;"
                                id="areaConhecimento">Matem√°tica</span>
                        </div>
                        <div class="info-row" style="display: flex; gap: 5px; margin-bottom: 10px;">
                            <span class="info-label"
                                style="font-family: 'Montserrat', sans-serif; font-weight: 700; font-size: 14px; color: #676d7d;">N√≠vel
                                de Taxonomia de Bloom:</span>
                            <span class="info-value primary-color"
                                style="font-family: 'Montserrat', sans-serif; font-weight: 700; font-size: 14px; color: #7367F0;"
                                id="nivelBloom">4: Analisar</span>
                        </div>
                        <div class="info-row" style="display: flex; gap: 5px;">
                            <span class="info-label"
                                style="font-family: 'Montserrat', sans-serif; font-weight: 700; font-size: 14px; color: #676d7d;">Subn√≠vel
                                de Taxonomia de Bloom:</span>
                            <span class="info-value primary-color"
                                style="font-family: 'Montserrat', sans-serif; font-weight: 700; font-size: 14px; color: #7367F0;"
                                id="subnivelBloom">4.2 Organizar</span>
                        </div>
                    </div>

                    <!-- Se√ß√£o: Dica para o professor (estrutura Figma via MCP) -->
                    <div class="dica-section" id="dicaSection">
                        <div class="dica-title-wrapper">
                            <p class="dica-title">Dica para o professor:</p>
                            <div class="dica-text-box">
                                <p class="dica-text" id="dicaTexto">
                                    Sempre busque criar um ambiente de aprendizado interativo, onde os alunos se sintam
                                    √† vontade para compartilhar suas ideias e fazer perguntas. Isso estimula a
                                    curiosidade e o engajamento na sala de aula!
                                </p>
                            </div>
                        </div>
                        <div class="dica-meta-row" style="margin-top: 10px; margin-bottom: 10px;">
                            <p class="dica-meta-label">Autoria:</p>
                            <p class="dica-meta-value" id="dicaAutoria">Educacross</p>
                        </div>
                        <div class="dica-meta-row" style="margin-top: 10px; margin-bottom: 10px;">
                            <p class="dica-meta-label">Uso:</p>
                            <p class="dica-meta-value" id="dicaUso">Todas as redes</p>
                        </div>
                    </div>

                    <!-- Se√ß√£o: T√≥pico de Conhecimento -->
                    <div class="content-section">
                        <div class="section-header">T√≥pico de conhecimento</div>
                        <div class="section-body">
                            <div class="info-row">
                                <span class="info-label">T√≠tulo:</span>
                                <span class="info-value primary-color">1.31.1.2 Per√≠odo de uma d√≠zima peri√≥dica</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Objeto do conhecimento:</span>
                                <span class="info-value primary-color">D√≠zimas Peri√≥dicas</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Tem√°tica:</span>
                                <span class="info-value primary-color">N√∫meros</span>
                            </div>
                        </div>
                    </div>

                    <!-- Se√ß√£o: BNCC e Dificuldade -->
                    <div class="content-section"
                        style="border: 1px solid #d8d6de; border-radius: 6px; padding: 10px; display: flex; flex-direction: column; gap: 10px;">
                        <div class="habilidade-text">
                            BNCC 6¬∫ Ano - N√∫meros - EF06MA02 - Contar de maneira exata ou aproximada, utilizando
                            diferentes estrat√©gias como o pareamento e outros agrupamentos.
                        </div>
                        <div class="difficulty-badge difficulty-high">Muito Dif√≠cil</div>
                    </div>

                    <!-- Se√ß√£o: Enunciado da Quest√£o -->
                    <div class="content-section">
                        <div class="section-header">Enunciado da quest√£o</div>
                        <div class="section-body">
                            <div class="question-section">
                                <div class="question-label">Quest√£o</div>
                                <div class="question-text">Maria observou que ao dividir 1 por 3 em sua calculadora, o
                                    resultado foi 0,333333...</div>
                            </div>
                            <div class="question-section">
                                <div class="question-label">Texto de ajuda</div>
                                <div class="question-text">Uma d√≠zima peri√≥dica √© um n√∫mero decimal onde um ou mais
                                    d√≠gitos se repetem infinitamente.</div>
                            </div>

                            <!-- Bloco Alternativas reorganizado para usar o padr√£o content-section -->
                            <div class="content-section" style="margin-top: 16px;">
                                <div class="section-header">Alternativas</div>
                                <div class="section-body alternatives-section">
                                    <!-- Alternativas com espa√ßamento de 40px entre elas -->
                                    <div class="alternative-item alternative-correct" style="margin-bottom: 40px;">
                                        <div class="alternative-header">
                                            <div class="alternative-label">A)</div>
                                            <div class="alternative-badge badge-correct">Correta</div>
                                        </div>
                                        <div class="alternative-content">
                                            <div class="alternative-text">1/3</div>
                                        </div>
                                        <div class="alternative-details">
                                            <div class="alternative-detail-section">
                                                <div class="detail-label">Texto de ajuda</div>
                                                <div class="detail-text">
                                                    Correto! A d√≠zima 0,333... √© igual a 1/3.
                                                </div>
                                            </div>
                                            <div class="alternative-detail-section">
                                                <div class="detail-label">Resolu√ß√£o</div>
                                                <div class="detail-text">
                                                    Para transformar 0,333... em fra√ß√£o: seja x = 0,333..., ent√£o 10x =
                                                    3,333..., subtraindo: 10x - x = 3, logo 9x = 3, portanto x = 1/3
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="alternative-item alternative-incorrect" style="margin-bottom: 40px;">
                                        <div class="alternative-header">
                                            <div class="alternative-label">B)</div>
                                            <div class="alternative-badge badge-incorrect">Incorreta</div>
                                        </div>
                                        <div class="alternative-content">
                                            <div class="alternative-text">3/10</div>
                                        </div>
                                        <div class="alternative-details">
                                            <div class="alternative-detail-section">
                                                <div class="detail-label">Distrator</div>
                                                <div class="detail-text">
                                                    Esta fra√ß√£o resulta em 0,3 (decimal exato), n√£o em 0,333... (d√≠zima
                                                    peri√≥dica)
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="alternative-item alternative-incorrect" style="margin-bottom: 40px;">
                                        <div class="alternative-header">
                                            <div class="alternative-label">C)</div>
                                            <div class="alternative-badge badge-incorrect">Incorreta</div>
                                        </div>
                                        <div class="alternative-content">
                                            <div class="alternative-text">33/100</div>
                                        </div>
                                        <div class="alternative-details">
                                            <div class="alternative-detail-section">
                                                <div class="detail-label">Distrator</div>
                                                <div class="detail-text">
                                                    Esta fra√ß√£o resulta em 0,33, que √© diferente de 0,333... infinito
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="alternative-item alternative-incorrect">
                                        <div class="alternative-header">
                                            <div class="alternative-label">D)</div>
                                            <div class="alternative-badge badge-incorrect">Incorreta</div>
                                        </div>
                                        <div class="alternative-content">
                                            <div class="alternative-text">1/9</div>
                                        </div>
                                        <div class="alternative-details">
                                            <div class="alternative-detail-section">
                                                <div class="detail-label">Distrator</div>
                                                <div class="detail-text">
                                                    1/9 = 0,111..., que √© diferente da d√≠zima apresentada
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Footer do Modal -->
            <div class="modal-footer">
                <div class="pagination-container" style="display: flex; align-items: center; gap: 0px;">
                    <button class="pagination-btn" id="prevQuestion"
                        style="background: #f3f2f7; border: none; cursor: pointer; border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M15 6L9 12L15 18" stroke="#7367F0" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" />
                        </svg>
                    </button>
                    <span id="pageCounter"
                        style="color: #2d3a61; font-size: 16px; font-family: 'Montserrat', sans-serif; font-weight: 600; line-height: 14px; word-wrap: break-word; min-width: 60px; text-align: center;">1/5</span>
                    <button class="pagination-btn" id="nextQuestion"
                        style="background: #f3f2f7; border: none; cursor: pointer; border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M9 6L15 12L9 18" stroke="#7367F0" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" />
                        </svg>
                    </button>
                    <span style="font-size:14px; color:#5e5873; margin-left:24px;">Quest√µes selecionadas:
                        <strong>5</strong></span>
                </div>
                <div class="actions-container">
                    <button class="btn btn-reject" id="btnReprovar">
                        <span class="badge" id="badge-reprovar">0</span>
                        <span>Reprovar</span>
                    </button>
                    <button class="btn btn-approve" id="btnAprovar">
                        <span class="badge" id="badge-aprovar">0</span>
                        <span>Aprovar</span>
                    </button>
                    <!-- Live region para leitores de tela -->
                    <div id="sr-status" role="status" class="sr-only" aria-live="polite" aria-atomic="true">
                        Aprovadas: 0. Reprovadas: 0.
                    </div>
                </div>

                <!-- Painel de Expans√£o para Reprova√ß√£o -->
                <div class="footer-rejection-panel" id="rejectionPanel">
                    <div class="rejection-header">
                        <h3 class="rejection-title">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                style="display: inline-block; vertical-align: middle; margin-right: 8px;">
                                <path
                                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"
                                    fill="#EA5455" />
                            </svg>
                            Por que est√° reprovando esta quest√£o?
                        </h3>
                        <button class="btn-close-panel" id="btnCloseRejectionPanel" aria-label="Cancelar reprova√ß√£o">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M15 5L5 15M5 5L15 15" stroke="#6E6B7B" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg>
                        </button>
                    </div>
                    <div class="rejection-body">
                        <label for="rejectionReason" class="rejection-label">
                            Descreva o motivo da reprova√ß√£o<span class="required"> *</span>
                        </label>

                        <textarea id="rejectionReason" class="rejection-textarea"
                            placeholder="Seja espec√≠fico. Exemplos:\n‚Ä¢ 'Concord√¢ncia verbal incorreta na linha 2: os aluno ‚Üí os alunos'\n‚Ä¢ 'Alternativa B deveria ser correta, pois 1/3 = 0,333...'\n‚Ä¢ 'Enunciado amb√≠guo: n√£o fica claro se refere a dividir 1√∑3 ou 3√∑1'"
                            rows="4" minlength="10" maxlength="500" aria-required="true"
                            aria-describedby="charCounterDesc"></textarea>

                        <div class="char-counter-wrapper">
                            <div class="char-counter" id="charCounterDesc" aria-live="polite">
                                <span id="charCount">0</span> / 10 caracteres m√≠nimos
                            </div>
                        </div>
                    </div>
                    <div class="rejection-actions">
                        <button class="btn btn-secondary" id="btnCancelarReprovacao">
                            Cancelar
                        </button>
                        <button class="btn btn-reject" id="btnConfirmarReprovacao" disabled>
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                style="display: inline-block; vertical-align: middle; margin-right: 6px;">
                                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" fill="white" />
                            </svg>
                            Confirmar Reprova√ß√£o
                        </button>
                    </div>
                </div>
            </div>

            <!-- Bot√£o de Fechar -->
            <button class="modal-close" id="btnFecharModal" aria-label="Fechar modal">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M15 5L5 15M5 5L15 15" stroke="#2F2B3D" stroke-width="1.5" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
            </button>
        </div>
    </div>



    <script>
        // === SISTEMA DE CONTADORES DE APROVA√á√ÉO/REPROVA√á√ÉO ===
        (function () {
            let approveCount = 0;
            let rejectCount = 0;

            const badgeAprovar = document.getElementById('badge-aprovar');
            const badgeReprovar = document.getElementById('badge-reprovar');
            const srStatus = document.getElementById('sr-status');

            function announce() {
                // role="status" j√° √© aria-live="polite"; leitores anunciam sem roubar foco
                // Atualize o texto para disparar o an√∫ncio.
                srStatus.textContent = `Aprovadas: ${approveCount}. Reprovadas: ${rejectCount}.`;
            }

            // Interceptar cliques nos bot√µes para atualizar contadores
            const btnAprovar = document.getElementById('btnAprovar');
            const btnReprovar = document.getElementById('btnReprovar');

            // Guardar handlers originais (se existirem)
            const originalAprovarHandler = btnAprovar.onclick;

            btnAprovar.addEventListener('click', function (e) {
                approveCount += 1;
                badgeAprovar.textContent = approveCount;
                announce();
                // Chamar handler original se existir
                if (originalAprovarHandler) {
                    originalAprovarHandler.call(this, e);
                }
            }, true); // true = capture phase para executar antes de outros handlers

            // N√£o incrementar ao clicar em "Reprovar"; apenas quando a reprova√ß√£o for confirmada
            document.addEventListener('reprovacao-confirmada', function () {
                rejectCount += 1;
                badgeReprovar.textContent = rejectCount;
                announce();
            });
        })();

        // === INTERATIVIDADE DO MODAL DE APROVA√á√ÉO ===

        // Fun√ß√£o para abrir o modal
        function abrirModal() {
            // Resetar flags de processamento
            questoes.forEach(q => q.processada = false);
            aprovadas = 0;
            reprovadas = 0;
            questaoAtual = 0;

            document.getElementById('modalAprovacao').style.display = 'flex';
            renderQuestao();
        }

        // Fun√ß√£o para fechar o modal
        function fecharModal() {
            document.getElementById('modalAprovacao').style.display = 'none';
        }

        const questoes = [
            {
                numero: "#687",
                areaConhecimento: "Matem√°tica",
                nivelBloom: "4: Analisar",
                subnivelBloom: "4.2 Organizar",
                dicaProfessor: {
                    texto: "Sempre busque criar um ambiente de aprendizado interativo, onde os alunos se sintam √† vontade para compartilhar suas ideias e fazer perguntas. Isso estimula a curiosidade e o engajamento na sala de aula!",
                    autoria: "Educacross",
                    uso: "Todas as redes"
                },
                enunciado: "Maria observou que ao dividir 1 por 3 em sua calculadora, o resultado foi 0,333333...",
                processada: false,
                alternativas: [
                    { texto: "1/3", correta: true, ajuda: "A d√≠zima 0,333... √© igual a 1/3.", resolucao: "Para transformar 0,333... em fra√ß√£o: seja x = 0,333..., ent√£o 10x = 3,333..., subtraindo: 10x - x = 3, logo 9x = 3, portanto x = 1/3" },
                    { texto: "3/10", correta: false, distrator: "Esta fra√ß√£o resulta em 0,3 (decimal exato), n√£o em 0,333... (d√≠zima peri√≥dica)" },
                    { texto: "33/100", correta: false, distrator: "Esta fra√ß√£o resulta em 0,33, que √© diferente de 0,333... infinito" },
                    { texto: "1/9", correta: false, distrator: "1/9 = 0,111..., que √© diferente da d√≠zima apresentada" }
                ],
                topico: {
                    titulo: "1.31.1.2 Per√≠odo de uma d√≠zima peri√≥dica",
                    objeto: "D√≠zimas Peri√≥dicas",
                    tematica: "N√∫meros",
                    bncc: "BNCC 6¬∫ Ano - N√∫meros - EF06MA02 - Contar de maneira exata ou aproximada, utilizando diferentes estrat√©gias como o pareamento e outros agrupamentos.",
                    dificuldade: "Muito Dif√≠cil"
                }
            },
            {
                numero: "#688",
                areaConhecimento: "Matem√°tica",
                nivelBloom: "3: Aplicar",
                subnivelBloom: "3.1 Executar",
                dicaProfessor: {
                    texto: "Incentive os alunos a explicarem o racioc√≠nio por tr√°s de cada passo ao resolver equa√ß√µes. Isso fortalece a compreens√£o e desenvolve o pensamento l√≥gico-matem√°tico.",
                    autoria: "Educacross",
                    uso: "Todas as redes"
                },
                enunciado: "Qual √© o valor de x na equa√ß√£o 2x + 3 = 7?",
                processada: false,
                alternativas: [
                    { texto: "2", correta: true, resolucao: "2x + 3 = 7 ‚Üí 2x = 4 ‚Üí x = 2" },
                    { texto: "1", correta: false },
                    { texto: "3", correta: false },
                    { texto: "4", correta: false }
                ],
                topico: {
                    titulo: "Equa√ß√£o do 1¬∫ grau",
                    objeto: "Equa√ß√µes",
                    tematica: "√Ålgebra",
                    bncc: "BNCC 6¬∫ Ano - √Ålgebra - EF06MA10 - Resolver e interpretar problemas envolvendo equa√ß√µes do 1¬∫ grau.",
                    dificuldade: "M√©dio"
                }
            },
            {
                numero: "#689",
                areaConhecimento: "Matem√°tica",
                nivelBloom: "1: Lembrar",
                subnivelBloom: "1.1 Reconhecer",
                dicaProfessor: {
                    texto: "Utilize exemplos pr√°ticos e jogos para ensinar n√∫meros primos. A gamifica√ß√£o torna o aprendizado mais divertido e memor√°vel para os estudantes.",
                    autoria: "Educacross",
                    uso: "Todas as redes"
                },
                enunciado: "Qual alternativa representa um n√∫mero primo?",
                processada: false,
                alternativas: [
                    { texto: "7", correta: true },
                    { texto: "9", correta: false },
                    { texto: "15", correta: false },
                    { texto: "21", correta: false }
                ],
                topico: {
                    titulo: "N√∫meros primos",
                    objeto: "N√∫meros Naturais",
                    tematica: "Teoria dos N√∫meros",
                    bncc: "BNCC 6¬∫ Ano - N√∫meros - EF06MA03 - Identificar e utilizar n√∫meros primos em situa√ß√µes do cotidiano.",
                    dificuldade: "F√°cil"
                }
            },
            {
                numero: "#690",
                areaConhecimento: "Matem√°tica",
                nivelBloom: "2: Entender",
                subnivelBloom: "2.1 Interpretar",
                dicaProfessor: {
                    texto: "Relacione conceitos matem√°ticos abstratos com situa√ß√µes concretas do dia a dia. Use exemplos visuais como pizza ou chocolate para explicar fra√ß√µes de forma mais intuitiva.",
                    autoria: "Educacross",
                    uso: "Todas as redes"
                },
                enunciado: "O que √© uma fra√ß√£o irredut√≠vel?",
                processada: false,
                alternativas: [
                    { texto: "N√£o pode ser simplificada", correta: true, ajuda: "Fra√ß√£o irredut√≠vel n√£o pode ser simplificada." },
                    { texto: "Pode ser simplificada", correta: false },
                    { texto: "√â sempre maior que 1", correta: false },
                    { texto: "√â sempre menor que 1", correta: false }
                ],
                topico: {
                    titulo: "Fra√ß√£o irredut√≠vel",
                    objeto: "Fra√ß√µes",
                    tematica: "N√∫meros Racionais",
                    bncc: "BNCC 6¬∫ Ano - N√∫meros - EF06MA04 - Compreender e identificar fra√ß√µes irredut√≠veis.",
                    dificuldade: "M√©dio"
                }
            },
            {
                numero: "#691",
                areaConhecimento: "Matem√°tica",
                nivelBloom: "3: Aplicar",
                subnivelBloom: "3.2 Implementar",
                dicaProfessor: {
                    texto: "Ensine padr√µes num√©ricos atrav√©s de m√∫sicas ou rimas. A associa√ß√£o com ritmo e melodia ajuda na memoriza√ß√£o de conceitos como m√∫ltiplos e tabuadas.",
                    autoria: "Educacross",
                    uso: "Todas as redes"
                },
                enunciado: "Qual alternativa N√ÉO √© m√∫ltiplo de 5?",
                processada: false,
                alternativas: [
                    { texto: "10", correta: false },
                    { texto: "15", correta: false },
                    { texto: "22", correta: true },
                    { texto: "25", correta: false }
                ],
                topico: {
                    titulo: "M√∫ltiplos de 5",
                    objeto: "M√∫ltiplos",
                    tematica: "Aritm√©tica",
                    bncc: "BNCC 6¬∫ Ano - N√∫meros - EF06MA05 - Identificar m√∫ltiplos e divisores de n√∫meros naturais.",
                    dificuldade: "F√°cil"
                }
            }
        ];

        let questaoAtual = 0;
        let totalQuestoes = questoes.length;
        let aprovadas = 0;
        let reprovadas = 0;
        let emTransicao = false;
        // N√∫mero fixo de quest√µes selecionadas exibido no footer (n√£o √© mais din√¢mico)
        const totalSelecionadas = 5; // Ajustar aqui caso mude a sele√ß√£o

        // === FUN√á√ïES AUXILIARES PARA GERENCIAMENTO DE FILA ===

        // Retorna apenas quest√µes n√£o processadas
        function getQuestoesNaoProcessadas() {
            return questoes.filter(q => !q.processada);
        }

        function updateProgress() {
            const processadas = aprovadas + reprovadas;
            const restantes = totalSelecionadas - processadas;
            const el = document.getElementById('paginationProgress');
            if (el) el.textContent = `${processadas}/${restantes}`;
        }

        function updatePageCounter() {
            const naoProcessadas = getQuestoesNaoProcessadas();
            const el = document.getElementById('pageCounter');
            if (!el) return;
            el.textContent = `${questaoAtual + 1}/${naoProcessadas.length}`;
        }

        function renderQuestao() {
            const naoProcessadas = getQuestoesNaoProcessadas();

            // Validar se ainda existem quest√µes
            if (naoProcessadas.length === 0) {
                // Todas processadas - exibir mensagem final
                document.getElementById('btnAprovar').disabled = true;
                document.getElementById('btnReprovar').disabled = true;
                document.getElementById('nextQuestion').disabled = true;
                document.getElementById('prevQuestion').disabled = true;
                showFeedback('Todas as quest√µes foram revisadas!', 'final');
                setTimeout(() => {
                    showFeedback('', '');
                    fecharModal();
                }, 2000);
                return;
            }

            // Ajustar √≠ndice se passou do limite
            if (questaoAtual >= naoProcessadas.length) {
                questaoAtual = naoProcessadas.length - 1;
            }
            if (questaoAtual < 0) {
                questaoAtual = 0;
            }

            const q = naoProcessadas[questaoAtual];

            // Informa√ß√µes da quest√£o
            document.getElementById('questaoNumero').textContent = q.numero || '';
            document.getElementById('areaConhecimento').textContent = q.areaConhecimento || '';
            document.getElementById('nivelBloom').textContent = q.nivelBloom || '';
            document.getElementById('subnivelBloom').textContent = q.subnivelBloom || '';

            // Dica para o professor
            if (q.dicaProfessor) {
                document.getElementById('dicaTexto').textContent = q.dicaProfessor.texto || '';
                document.getElementById('dicaAutoria').textContent = q.dicaProfessor.autoria || '';
                document.getElementById('dicaUso').textContent = q.dicaProfessor.uso || '';
                document.getElementById('dicaSection').style.display = 'block';
            } else {
                document.getElementById('dicaSection').style.display = 'none';
            }

            // Enunciado
            document.querySelector('.question-text').textContent = q.enunciado;

            // T√≥pico de conhecimento - selecionar corretamente dentro da se√ß√£o de t√≥pico
            const topico = q.topico || {};
            const topicoSection = document.querySelectorAll('.content-section')[1]; // Segunda se√ß√£o √© o t√≥pico
            const topicoValues = topicoSection.querySelectorAll('.info-value.primary-color');
            topicoValues[0].textContent = topico.titulo || '';
            topicoValues[1].textContent = topico.objeto || '';
            topicoValues[2].textContent = topico.tematica || '';

            document.querySelector('.habilidade-text').textContent = topico.bncc || '';
            const dificuldadeBadge = document.querySelector('.difficulty-badge');
            dificuldadeBadge.textContent = topico.dificuldade || '';
            dificuldadeBadge.className = 'difficulty-badge ' + (topico.dificuldade === 'Muito Dif√≠cil' ? 'difficulty-high' : topico.dificuldade === 'M√©dio' ? 'difficulty-medium' : 'difficulty-low');

            // Alternativas
            const altSection = document.querySelector('.alternatives-section');
            altSection.innerHTML = '';
            q.alternativas.forEach((alt, idx) => {
                const altDiv = document.createElement('div');
                altDiv.className = 'alternative-item' + (alt.correta ? ' alternative-correct' : ' alternative-incorrect');
                altDiv.style.marginBottom = idx < q.alternativas.length - 1 ? '40px' : '0';

                // Header
                const header = document.createElement('div');
                header.className = 'alternative-header';
                const label = document.createElement('div');
                label.className = 'alternative-label';
                label.textContent = String.fromCharCode(65 + idx) + ')';
                header.appendChild(label);
                if (alt.correta) {
                    const badge = document.createElement('div');
                    badge.className = 'alternative-badge badge-correct';
                    badge.textContent = 'Correta';
                    header.appendChild(badge);
                } else {
                    const badge = document.createElement('div');
                    badge.className = 'alternative-badge badge-incorrect';
                    badge.textContent = 'Incorreta';
                    header.appendChild(badge);
                }
                altDiv.appendChild(header);

                // Conte√∫do
                const content = document.createElement('div');
                content.className = 'alternative-content';
                const text = document.createElement('div');
                text.className = 'alternative-text';
                text.textContent = alt.texto;
                content.appendChild(text);
                altDiv.appendChild(content);

                // Detalhes
                if (alt.ajuda || alt.distrator || alt.resolucao) {
                    const details = document.createElement('div');
                    details.className = 'alternative-details';
                    if (alt.ajuda) {
                        const sec = document.createElement('div');
                        sec.className = 'alternative-detail-section';
                        const lbl = document.createElement('div');
                        lbl.className = 'detail-label';
                        lbl.textContent = 'Texto de ajuda';
                        sec.appendChild(lbl);
                        const txt = document.createElement('div');
                        txt.className = 'detail-text';
                        txt.textContent = alt.ajuda;
                        sec.appendChild(txt);
                        details.appendChild(sec);
                    }
                    if (alt.distrator) {
                        const sec = document.createElement('div');
                        sec.className = 'alternative-detail-section';
                        const lbl = document.createElement('div');
                        lbl.className = 'detail-label';
                        lbl.textContent = 'Distrator';
                        sec.appendChild(lbl);
                        const txt = document.createElement('div');
                        txt.className = 'detail-text';
                        txt.textContent = alt.distrator;
                        sec.appendChild(txt);
                        details.appendChild(sec);
                    }
                    if (alt.resolucao) {
                        const sec = document.createElement('div');
                        sec.className = 'alternative-detail-section';
                        const lbl = document.createElement('div');
                        lbl.className = 'detail-label';
                        lbl.textContent = 'Resolu√ß√£o';
                        sec.appendChild(lbl);
                        const txt = document.createElement('div');
                        txt.className = 'detail-text';
                        txt.textContent = alt.resolucao;
                        sec.appendChild(txt);
                        details.appendChild(sec);
                    }
                    altDiv.appendChild(details);
                }
                altSection.appendChild(altDiv);
            });
            // Atualiza progresso (processadas/total)
            updateProgress();
            // Atualiza contador de p√°ginas
            updatePageCounter();
            // Limpar feedback
            showFeedback('');
            // Controle dos bot√µes de navega√ß√£o
            const btnNext = document.getElementById('nextQuestion');
            const btnPrev = document.getElementById('prevQuestion');
            // Garantir que fiquem vis√≠veis
            btnPrev.style.display = 'flex';
            btnNext.style.display = 'flex';
            // Desabilitar baseado em quest√µes n√£o processadas
            btnPrev.disabled = (questaoAtual === 0);
            btnNext.disabled = (questaoAtual >= naoProcessadas.length - 1);

            // Restaurar eventos e habilitar bot√µes de a√ß√£o
            document.getElementById('btnAprovar').disabled = false;
            document.getElementById('btnReprovar').disabled = false;
            document.getElementById('btnAprovar').onclick = aprovarQuestao;
            document.getElementById('btnReprovar').onclick = reprovarQuestao;
            document.getElementById('nextQuestion').onclick = () => proximaQuestao(false);
            document.getElementById('prevQuestion').onclick = anteriorQuestao;

            // Resetar scroll para o topo ao carregar uma nova quest√£o
            const scrollContainers = [
                document.querySelector('.modal-body'),
                document.querySelector('.modal-content'),
                document.querySelector('.alternatives-section')
            ].filter(Boolean);
            // Aplicar imediatamente e ap√≥s o pr√≥ximo frame para garantir ap√≥s atualiza√ß√µes do DOM
            scrollContainers.forEach(el => { try { el.scrollTop = 0; } catch (e) { } });
            requestAnimationFrame(() => scrollContainers.forEach(el => { try { el.scrollTop = 0; } catch (e) { } }));
        }

        function showFeedback(msg, tipo) {
            const modalDialog = document.querySelector('.modal-dialog');
            // Dimmer
            let dimmer = document.getElementById('modalDimmer');
            if (!dimmer) {
                dimmer = document.createElement('div');
                dimmer.id = 'modalDimmer';
                Object.assign(dimmer.style, {
                    position: 'absolute', inset: '0', background: 'rgba(255,255,255,0.88)', backdropFilter: 'blur(3px)', zIndex: '500', display: 'none'
                });
                modalDialog.appendChild(dimmer);
            }
            let card = document.getElementById('modalFeedback');
            if (!card) {
                card = document.createElement('div');
                card.id = 'modalFeedback';
                card.className = 'feedback-card';
                modalDialog.appendChild(card);
            }
            if (!msg) {
                if (card.style.display !== 'none') {
                    card.style.opacity = '0';
                    card.style.transform = 'translate(-50%, -50%) scale(.92)';
                    setTimeout(() => { card.style.display = 'none'; }, 280);
                }
                dimmer.style.display = 'none';
                document.querySelector('.modal-body').style.pointerEvents = 'auto';
                document.querySelector('.modal-footer').style.pointerEvents = 'auto';
                return;
            }
            // Construir conte√∫do
            card.innerHTML = '';
            card.className = 'feedback-card ' + (tipo || '');
            const ribbon = document.createElement('div'); ribbon.className = 'feedback-ribbon'; card.appendChild(ribbon);
            // Adicionar √≠cone para todos os tipos
            const icon = document.createElement('div'); icon.className = 'feedback-icon';
            if (tipo === 'aprovado') {
                icon.innerHTML = '<svg width="42" height="42" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="11" stroke="#28C76F" stroke-width="2"/><path d="M7 12l3 3 7-7" stroke="#28C76F" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>';
            } else if (tipo === 'reprovado') {
                icon.innerHTML = '<svg width="42" height="42" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="11" stroke="#EA5455" stroke-width="2"/><path d="M9 9l6 6M15 9l-6 6" stroke="#EA5455" stroke-width="2" stroke-linecap="round"/></svg>';
            } else if (tipo === 'final') {
                icon.className = 'feedback-icon feedback-icon-animated';
                icon.innerHTML = '<svg width="64" height="64" viewBox="0 0 24 24" fill="none"><circle class="check-circle" cx="12" cy="12" r="10" stroke="#7367F0" stroke-width="2" fill="none"/><path class="check-mark" d="M6 12l4 4 8-8" stroke="#7367F0" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg>';
            }
            card.appendChild(icon);
            const message = document.createElement('div'); message.className = 'feedback-message'; message.textContent = msg; card.appendChild(message);
            if (tipo !== 'final') {
                const progress = document.createElement('div'); progress.className = 'feedback-progress';
                const bar = document.createElement('div'); bar.className = 'feedback-bar'; progress.appendChild(bar); card.appendChild(progress);
            }
            // Mostrar
            dimmer.style.display = 'block';
            card.style.display = 'flex';
            requestAnimationFrame(() => {
                card.style.opacity = '1';
                card.style.transform = 'translate(-50%, -50%) scale(1)';
            });
            document.querySelector('.modal-body').style.pointerEvents = 'none';
            document.querySelector('.modal-footer').style.pointerEvents = 'none';
        }

        function aprovarQuestao() {
            if (emTransicao) return;
            emTransicao = true;

            const naoProcessadas = getQuestoesNaoProcessadas();
            const questaoProcessada = naoProcessadas[questaoAtual];

            // Marcar como processada no array original
            const indiceOriginal = questoes.findIndex(q => q.numero === questaoProcessada.numero);
            if (indiceOriginal !== -1) {
                questoes[indiceOriginal].processada = true;
            }

            aprovadas++;
            updateProgress();
            showFeedback('Quest√£o aprovada!', 'aprovado');
            document.getElementById('btnAprovar').disabled = true;
            document.getElementById('btnReprovar').disabled = true;
            document.getElementById('nextQuestion').disabled = true;
            setTimeout(() => {
                proximaQuestao(true);
            }, 900);
        }

        function reprovarQuestao() {
            if (emTransicao) return;

            // Abrir painel de reprova√ß√£o ao inv√©s de processar direto
            abrirPainelReprovacao();
        }

        // === SISTEMA DE PAINEL DE REPROVA√á√ÉO ===
        function abrirPainelReprovacao() {
            const panel = document.getElementById('rejectionPanel');
            const textarea = document.getElementById('rejectionReason');
            const charCount = document.getElementById('charCount');
            const btnConfirmar = document.getElementById('btnConfirmarReprovacao');

            // Resetar valores
            textarea.value = '';
            charCount.textContent = '0';
            btnConfirmar.disabled = true;
            textarea.classList.remove('invalid', 'shake');
            document.getElementById('charCounterDesc').classList.remove('valid', 'invalid');

            // Expandir painel
            panel.classList.add('expanded');

            // Desabilitar navega√ß√£o enquanto painel aberto
            document.getElementById('btnAprovar').disabled = true;
            document.getElementById('btnReprovar').disabled = true;
            document.getElementById('prevQuestion').disabled = true;
            document.getElementById('nextQuestion').disabled = true;

            // Focar no textarea
            setTimeout(() => {
                textarea.focus();
            }, 300);
        }

        function fecharPainelReprovacao() {
            const panel = document.getElementById('rejectionPanel');
            panel.classList.remove('expanded');

            // Reabilitar navega√ß√£o
            document.getElementById('btnAprovar').disabled = false;
            document.getElementById('btnReprovar').disabled = false;
            const naoProcessadas = getQuestoesNaoProcessadas();
            document.getElementById('prevQuestion').disabled = (questaoAtual === 0);
            document.getElementById('nextQuestion').disabled = (questaoAtual >= naoProcessadas.length - 1);
        }

        function validarMotivoReprovacao() {
            const textarea = document.getElementById('rejectionReason');
            const charCount = document.getElementById('charCount');
            const charCountDesc = document.getElementById('charCounterDesc');
            const btnConfirmar = document.getElementById('btnConfirmarReprovacao');

            const length = textarea.value.trim().length;
            charCount.textContent = length;

            if (length >= 10) {
                btnConfirmar.disabled = false;
                textarea.classList.remove('invalid');
                charCountDesc.classList.remove('invalid');
                charCountDesc.classList.add('valid');
            } else {
                // Enquanto o usu√°rio digita, n√£o mostramos erro vermelho
                // Apenas desabilitamos o bot√£o e mantemos estado neutro
                btnConfirmar.disabled = true;
                textarea.classList.remove('invalid');
                charCountDesc.classList.remove('valid', 'invalid');
            }
        }

        // Mostra erro somente quando o usu√°rio sai do campo sem atingir o m√≠nimo
        function validarMotivoOnBlur() {
            const textarea = document.getElementById('rejectionReason');
            const charCountDesc = document.getElementById('charCounterDesc');
            const length = textarea.value.trim().length;
            if (length > 0 && length < 10) {
                textarea.classList.add('invalid');
                charCountDesc.classList.add('invalid');
            }
        }

        function confirmarReprovacao() {
            const textarea = document.getElementById('rejectionReason');
            const motivo = textarea.value.trim();

            // Valida√ß√£o final
            if (motivo.length < 10) {
                textarea.classList.add('shake', 'invalid');
                setTimeout(() => textarea.classList.remove('shake'), 500);
                return;
            }

            // Processar reprova√ß√£o
            emTransicao = true;

            const naoProcessadas = getQuestoesNaoProcessadas();
            const questaoProcessada = naoProcessadas[questaoAtual];

            // Marcar como processada e adicionar motivo
            const indiceOriginal = questoes.findIndex(q => q.numero === questaoProcessada.numero);
            if (indiceOriginal !== -1) {
                questoes[indiceOriginal].processada = true;
                questoes[indiceOriginal].motivoReprovacao = motivo;
            }

            reprovadas++;
            // Disparar evento para atualizar contador visual de reprovadas
            document.dispatchEvent(new CustomEvent('reprovacao-confirmada'));

            // Fechar painel
            fecharPainelReprovacao();

            // Exibir feedback
            updateProgress();
            showFeedback('Quest√£o reprovada!', 'reprovado');

            // Avan√ßar para pr√≥xima quest√£o
            setTimeout(() => {
                proximaQuestao(true);
            }, 900);
        }

        // Event listeners para o painel de reprova√ß√£o
        document.addEventListener('DOMContentLoaded', function () {
            // Textarea com valida√ß√£o em tempo real
            const textarea = document.getElementById('rejectionReason');
            if (textarea) {
                textarea.addEventListener('input', validarMotivoReprovacao);
                textarea.addEventListener('blur', validarMotivoOnBlur);
                textarea.addEventListener('focus', function () {
                    textarea.classList.remove('invalid', 'shake');
                    document.getElementById('charCounterDesc').classList.remove('invalid');
                });
            }

            // Bot√£o de fechar painel (X)
            const btnClosePanel = document.getElementById('btnCloseRejectionPanel');
            if (btnClosePanel) {
                btnClosePanel.addEventListener('click', fecharPainelReprovacao);
            }

            // Bot√£o Cancelar
            const btnCancelar = document.getElementById('btnCancelarReprovacao');
            if (btnCancelar) {
                btnCancelar.addEventListener('click', fecharPainelReprovacao);
            }

            // Bot√£o Confirmar Reprova√ß√£o
            const btnConfirmar = document.getElementById('btnConfirmarReprovacao');
            if (btnConfirmar) {
                btnConfirmar.addEventListener('click', confirmarReprovacao);
            }

            // ESC para fechar painel
            document.addEventListener('keydown', function (e) {
                const panel = document.getElementById('rejectionPanel');
                if (e.key === 'Escape' && panel && panel.classList.contains('expanded')) {
                    fecharPainelReprovacao();
                }
            });
        });

        function proximaQuestao(avancoPorFeedback) {
            if (emTransicao && !avancoPorFeedback) return;

            const naoProcessadas = getQuestoesNaoProcessadas();

            // Se n√£o h√° mais quest√µes n√£o processadas, exibir mensagem final
            if (naoProcessadas.length === 0) {
                document.getElementById('btnAprovar').disabled = true;
                document.getElementById('btnReprovar').disabled = true;
                document.getElementById('nextQuestion').disabled = true;
                document.getElementById('prevQuestion').disabled = true;
                updateProgress();
                showFeedback('Todas as quest√µes foram revisadas!', 'final');
                emTransicao = false;
                setTimeout(() => {
                    showFeedback('', '');
                    fecharModal();
                }, 2000);
                return;
            }

            // Se avan√ßou por feedback (ap√≥s aprovar/reprovar), n√£o incrementar √≠ndice
            // pois a quest√£o atual foi removida do array filtrado
            if (!avancoPorFeedback) {
                questaoAtual++;
            }

            // Validar limites
            if (questaoAtual >= naoProcessadas.length) {
                questaoAtual = naoProcessadas.length - 1;
            }

            renderQuestao();
            emTransicao = false;
        }

        function anteriorQuestao() {
            if (questaoAtual > 0) {
                questaoAtual--;
                renderQuestao();
            }
        }

        // Eventos dos bot√µes
        document.getElementById('btnAprovar').onclick = aprovarQuestao;
        document.getElementById('btnReprovar').onclick = reprovarQuestao;
        document.getElementById('nextQuestion').onclick = () => proximaQuestao(false);
        document.getElementById('prevQuestion').onclick = anteriorQuestao;

        // Inicializar modal ao abrir
        document.addEventListener('DOMContentLoaded', function () {
            // Adicionar evento de fechar no bot√£o X
            document.getElementById('btnFecharModal').onclick = fecharModal;

            // Adicionar evento de fechar ao clicar fora do modal
            document.getElementById('modalAprovacao').onclick = function (e) {
                if (e.target === this) {
                    fecharModal();
                }
            };

            renderQuestao();
            updateProgress();
            updatePageCounter();
            // Habilita o bot√£o de pr√≥xima quest√£o no in√≠cio
            document.getElementById('nextQuestion').disabled = false;
        });
    </script>
</body>

</html>