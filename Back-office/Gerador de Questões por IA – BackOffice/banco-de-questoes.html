<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banco de Questões | Backoffice Educacross</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <style>
        /* ========== RESET & GLOBAL ========== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Theme Colors */
            --primary: #7367F0;
            --primary-light: rgba(115, 103, 240, 0.12);
            --secondary: #82868B;
            --body-text: #6E6B7B;
            --white: #FFFFFF;
            --light: #BABFC7;
            --warning: #FF9F43;
            --danger: #EA5455;
            --success: #28C76F;
            --info: #00CFE8;
            --tematica: #D63384;
            --objeto: #00BDB9;

            /* Neutrals */
            --neutral-light: #F5F5F5;
            --neutral-border: #D8D6DE;
            --neutral-row: #ECECEC;
            --neutral-row-alt: #DFDFDF;

            /* Typography */
            --font-family: 'Montserrat', sans-serif;
            --h1-size: 28px;
            --body-size: 14px;
            --label-size: 12px;
        }

        body {
            font-family: var(--font-family);
            background: #f8f7fa;
            color: var(--body-text);
            overflow-x: hidden;
        }

        /* ========== LAYOUT PRINCIPAL ========== */
        .app-layout {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar (reutilizar do criar-nova-questao.html) */
        .sidebar {
            width: 282px;
            background: #283046;
            padding: 40px 16px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }

        .sidebar-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 30px;
        }

        .logo-icon,
        .logo-text {
            height: 32.3px;
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
            text-decoration: none;
        }

        .sidebar-item:hover {
            background: rgba(186, 191, 199, 0.12);
        }

        .sidebar-item.active {
            background: var(--primary);
        }

        .sidebar-item-content {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sidebar-item-icon {
            width: 20px;
            height: 20px;
        }

        .sidebar-item-text {
            font-weight: 600;
            font-size: 15px;
            line-height: 24px;
            white-space: nowrap;
        }

        /* Main Content */
        .main-content {
            margin-left: 282px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        /* Global Header */
        .global-header {
            background: white;
            border: 1px solid #e2e2e3;
            border-radius: 10px;
            padding: 16px;
            margin: 16px 16px 0 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header-user-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .user-name {
            font-weight: 500;
            font-size: 14px;
            color: var(--body-text);
            letter-spacing: 0.4px;
        }

        .user-avatar {
            width: 42px;
            height: 42px;
            background: var(--primary);
            border-radius: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 20px;
            color: white;
        }

        /* Container */
        .container {
            padding: 24px;
        }

        /* Page Header */
        .page-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .page-title {
            font-weight: 500;
            font-size: var(--h1-size);
            color: var(--primary);
            line-height: 1;
        }

        /* ========== TABS ========== */
        .tabs-container {
            border-bottom: 2px solid var(--primary);
            margin-bottom: 10px;
        }

        .tabs {
            display: flex;
            gap: 0;
        }

        .tab {
            padding: 12px 24px;
            font-weight: 700;
            font-size: var(--body-size);
            cursor: pointer;
            color: var(--body-text);
            background: transparent;
            border: none;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
            position: relative;
            bottom: -2px;
        }

        .tab.active {
            color: white;
            background: var(--primary);
            border-radius: 6px 6px 0 0;
        }

        .tab:hover:not(.active) {
            background: rgba(115, 103, 240, 0.06);
        }

        /* Total Info Bar */
        .total-info {
            background: var(--primary-light);
            padding: 12px 20px;
            border-radius: 6px;
            margin-bottom: 20px;
        }

        .total-info span {
            font-weight: 700;
            color: var(--primary);
            font-size: var(--body-size);
        }

        /* ========== FILTROS ========== */
        .filters-card {
            background: white;
            padding: 20px;
            border-radius: 6px;
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.06);
            margin-bottom: 20px;
        }

        .filters-row {
            display: flex;
            gap: 10px;
            align-items: flex-end;
            margin-bottom: 10px;
        }

        .filter-group {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .filter-label {
            font-weight: 700;
            font-size: var(--label-size);
            color: var(--body-text);
        }

        .filter-select {
            height: 44px;
            padding: 10px;
            border: 1px solid var(--neutral-border);
            border-radius: 5px;
            font-size: var(--body-size);
            color: var(--body-text);
            background: white;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='%236e6b7b' d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 20px;
            padding-right: 40px;
            cursor: pointer;
        }

        .filter-search {
            height: 44px;
            padding: 10px 16px;
            border: 1px solid var(--neutral-border);
            border-radius: 5px;
            font-size: var(--body-size);
            color: var(--light);
            background: white;
            width: 100%;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            padding: 10px 20px;
            height: 44px;
            border-radius: 6px;
            font-weight: 700;
            font-size: var(--body-size);
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid;
            white-space: nowrap;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .btn-primary:hover {
            background: #6259d0;
        }

        .btn-outline {
            background: white;
            color: var(--primary);
            border-color: var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary-light);
        }

        .btn .material-icons {
            font-size: 24px;
        }

        /* ========== TABELA HIERÁRQUICA ========== */
        .table-container {
            background: white;
            border-radius: 6px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.16);
            overflow: hidden;
        }

        .table-row {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 10px 20px;
            border-bottom: 1px solid #ebe9f1;
            min-height: 46px;
            transition: background 0.2s;
        }

        .table-row.level-0 {
            background: white;
        }

        .table-row.level-1 {
            background: var(--neutral-row);
        }

        .table-row.level-2 {
            background: var(--neutral-row-alt);
        }

        .table-row.expanded {
            /* Row está expandida */
        }

        .table-row:hover {
            background: rgba(115, 103, 240, 0.04);
        }

        .row-toggle {
            width: 24px;
            height: 24px;
            cursor: pointer;
            transition: transform 0.3s;
            flex-shrink: 0;
        }

        .row-toggle.rotated {
            transform: rotate(180deg);
        }

        .row-code {
            min-width: 83px;
            font-weight: 700;
            color: var(--primary);
            font-size: var(--body-size);
            flex-shrink: 0;
        }

        .row-content {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 5px;
            flex-wrap: wrap;
        }

        .row-title {
            font-weight: 700;
            color: var(--primary);
            font-size: var(--body-size);
        }

        .row-description {
            flex: 1;
            color: var(--body-text);
            font-size: var(--body-size);
        }

        .badge {
            display: inline-flex;
            align-items: center;
            gap: 3px;
            padding: 1px 9px;
            border-radius: 17px;
            font-weight: 700;
            font-size: var(--label-size);
            line-height: 18px;
            white-space: nowrap;
        }

        .badge-tematica {
            background: rgba(214, 51, 132, 0.12);
            color: var(--tematica);
        }

        .badge-objeto {
            background: rgba(0, 189, 185, 0.12);
            color: var(--objeto);
        }

        .badge-primary {
            background: var(--primary-light);
            color: var(--primary);
        }

        .badge-warning {
            background: rgba(255, 159, 67, 0.12);
            color: var(--warning);
        }

        .badge .material-icons {
            font-size: 16px;
        }

        .row-actions {
            display: flex;
            gap: 8px;
            align-items: center;
            flex-shrink: 0;
        }

        .btn-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: none;
            background: transparent;
            color: var(--primary);
            transition: transform 0.2s;
        }

        .btn-icon:hover {
            transform: scale(1.1);
        }

        .btn-icon .material-icons {
            font-size: 24px;
        }

        /* Indent hierárquico */
        .indent-1 {
            padding-left: 40px;
        }

        .indent-2 {
            padding-left: 80px;
        }

        /* ========== PAGINAÇÃO ========== */
        .pagination-container {
            display: flex;
            justify-content: center;
            padding: 10px 20px;
            background: white;
            border-top: 1px solid #ebe9f1;
            border-radius: 0 0 6px 6px;
        }

        .pagination {
            display: flex;
            gap: 5px;
            align-items: center;
        }

        .pagination-btn {
            width: 28px;
            height: 28px;
            border-radius: 29px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f3f2f7;
            color: var(--body-text);
            border: none;
            cursor: pointer;
            font-weight: 600;
            font-size: var(--body-size);
            transition: all 0.3s;
        }

        .pagination-btn:hover {
            background: var(--primary-light);
        }

        .pagination-btn.active {
            background: var(--primary);
            color: white;
        }

        .pagination-btn .material-icons {
            font-size: 16px;
        }

        /* ========== RESPONSIVIDADE ========== */
        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s;
                z-index: 1000;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .filters-row {
                flex-wrap: wrap;
            }

            .filter-group {
                flex-basis: 100%;
            }
        }

        /* Hidden utility */
        .hidden {
            display: none !important;
        }
    </style>
</head>

<body>
    <div class="app-layout">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="sidebar-logo">
                <img src="http://localhost:3845/assets/00d1b6c4064e590f6e33e262a10b5b2498b8152d.svg"
                    alt="Logo Educacross" class="logo-icon">
            </div>
            <a href="#" class="sidebar-item">
                <div class="sidebar-item-content">
                    <span class="material-icons sidebar-item-icon">home</span>
                    <span class="sidebar-item-text">Home</span>
                </div>
            </a>
            <a href="#" class="sidebar-item active">
                <div class="sidebar-item-content">
                    <span class="material-icons sidebar-item-icon">school</span>
                    <span class="sidebar-item-text">Banco de Questões</span>
                </div>
            </a>
            <a href="#" class="sidebar-item">
                <div class="sidebar-item-content">
                    <span class="material-icons sidebar-item-icon">videogame_asset</span>
                    <span class="sidebar-item-text">Banco de Jogos</span>
                </div>
            </a>
            <a href="#" class="sidebar-item">
                <div class="sidebar-item-content">
                    <span class="material-icons sidebar-item-icon">calendar_today</span>
                    <span class="sidebar-item-text">Eventos</span>
                </div>
            </a>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Global Header -->
            <header class="global-header">
                <div></div>
                <div class="header-user-info">
                    <span class="user-name">Usuário do backoffice</span>
                    <div class="user-avatar">A</div>
                </div>
            </header>

            <!-- Container -->
            <div class="container">
                <!-- Page Header -->
                <div class="page-header">
                    <h1 class="page-title">Banco de Questões</h1>
                </div>

                <!-- Tabs -->
                <div class="tabs-container">
                    <div class="tabs">
                        <button class="tab active" data-tab="habilidades"
                            onclick="switchTab('habilidades')">Habilidades</button>
                        <button class="tab" data-tab="topicos" onclick="switchTab('topicos')">Tópicos</button>
                    </div>
                </div>

                <!-- Total Info -->
                <div class="total-info">
                    <span id="total-label">Total de Questões: <strong id="total-count">949</strong></span>
                </div>

                <!-- Filtros -->
                <div class="filters-card">
                    <div class="filters-row">
                        <div class="filter-group">
                            <label class="filter-label">Área de Conhecimento</label>
                            <select class="filter-select" id="filter-area">
                                <option value="matematica">Matemática</option>
                                <option value="portugues">Língua Portuguesa</option>
                                <option value="todas">Todas as áreas</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label class="filter-label">Ano Escolar</label>
                            <select class="filter-select" id="filter-ano">
                                <option value="todos">Todos os anos escolares</option>
                                <option value="1">1º Ano</option>
                                <option value="2">2º Ano</option>
                            </select>
                        </div>
                        <button class="btn btn-outline">Todas as questões</button>
                        <button class="btn btn-primary">
                            <span class="material-icons">add_circle</span>
                            Nova questão
                        </button>
                        <button class="btn btn-primary">
                            <span class="material-icons">auto_awesome</span>
                            Nova questão IA
                        </button>
                    </div>
                    <input type="text" class="filter-search" placeholder="Pesquisar por tópico" id="filter-search">
                </div>

                <!-- Tabela Habilidades -->
                <div id="table-habilidades" class="table-container">
                    <!-- Será preenchido via JavaScript -->
                </div>

                <!-- Tabela Tópicos -->
                <div id="table-topicos" class="table-container hidden">
                    <!-- Será preenchido via JavaScript -->
                </div>
            </div>
        </main>
    </div>

    <script>
        // ========== STATE MANAGEMENT ==========
        window.bancoQuestoesState = {
            activeTab: 'habilidades',
            expandedRows: {},
            filters: {
                area: 'matematica',
                ano: 'todos',
                search: ''
            }
        };

        // Dados mockados Habilidades
        const habilidadesData = [
            {
                id: '1',
                code: '1',
                title: 'Números',
                type: 'tematica',
                counters: { ia: 165, blocos: 165, questoes: 330 },
                children: [
                    { id: '1-1', code: 'EF01MA01', description: 'Utilizar números naturais como indicador de quantidade ou de ordem em diferentes situações cotidianas e reconhecer situações em que os números não indicam contagem nem ordem, mas sim código de identificação.', counters: { ia: 165, blocos: 165 } },
                    { id: '1-2', code: 'EF01MA02', description: 'Contar de maneira exata ou aproximada, utilizando diferentes estratégias como o pareamento e outros agrupamentos.', counters: { questoes: 120 } },
                    { id: '1-3', code: 'EF01MA03', description: 'Estimar e comparar quantidades de objetos de dois conjuntos (em torno de 20 elementos), por estimativa e/ou por correspondência (um a um, dois a dois) para indicar "tem mais", "tem menos" ou "tem a mesma quantidade".', counters: { questoes: 120 } },
                    { id: '1-4', code: 'EF01MA02', description: 'Contar a quantidade de objetos de coleções até 100 unidades e apresentar o resultado por registros verbais e simbólicos, em situações de seu interesse, como jogos, brincadeiras, materiais da sala de aula, entre outros.', counters: { questoes: 120 } }
                ]
            },
            {
                id: '2',
                code: '2',
                title: 'Geometria',
                type: 'tematica',
                counters: { ia: 229, blocos: 229, questoes: 458 },
                children: []
            },
            {
                id: '3',
                code: '3',
                title: 'Grandezas e Medidas',
                type: 'tematica',
                counters: { ia: 165, blocos: 35, questoes: 200 },
                children: []
            },
            {
                id: '4',
                code: '4',
                title: 'Probabilidade e Estatística',
                type: 'tematica',
                counters: { questoes: 0 },
                children: []
            }
        ];

        // Dados mockados Tópicos
        const topicosData = [
            {
                id: 't1',
                code: '1',
                title: 'Análise linguística/semiótica - CIE',
                type: 'tematica',
                counters: { jogos: 43, ia: 40, blocos: 135, questoes: 165 },
                children: [
                    {
                        id: 't1-1',
                        code: '1.1',
                        title: 'Morfologia',
                        type: 'objeto',
                        counters: { jogos: 43, questoes: 45 },
                        children: [
                            { id: 't1-1-1', code: '1.1.1', title: 'Substantivos', counters: { jogos: 43, questoes: 2 } }
                        ]
                    },
                    { id: 't1-2', code: '1.2', title: 'Adjetivos e locução adjetivas', counters: { jogos: 1, questoes: 17 } }
                ]
            },
            {
                id: 't2',
                code: '2',
                title: 'Escrita -CIE',
                type: 'tematica',
                counters: { jogos: 4, ia: 320, blocos: 138, questoes: 458 },
                children: []
            }
        ];

        // ========== RENDER FUNCTIONS ==========
        function renderHabilidades() {
            const container = document.getElementById('table-habilidades');
            container.innerHTML = '';

            habilidadesData.forEach(item => {
                const isExpanded = window.bancoQuestoesState.expandedRows[item.id];
                const rowHTML = createHabilidadeRow(item, 0, isExpanded);
                container.insertAdjacentHTML('beforeend', rowHTML);

                if (isExpanded && item.children && item.children.length > 0) {
                    item.children.forEach(child => {
                        const childHTML = createHabilidadeRow(child, 1, false, true);
                        container.insertAdjacentHTML('beforeend', childHTML);
                    });
                }
            });

            // Paginação
            container.insertAdjacentHTML('beforeend', `
                <div class="pagination-container">
                    <div class="pagination">
                        <button class="pagination-btn"><span class="material-icons">chevron_left</span></button>
                        <button class="pagination-btn active">1</button>
                        <button class="pagination-btn"><span class="material-icons">chevron_right</span></button>
                    </div>
                </div>
            `);
        }

        function createHabilidadeRow(item, level, isExpanded, isChild = false) {
            const hasChildren = item.children && item.children.length > 0;
            const toggleIcon = hasChildren
                ? `<span class="material-icons row-toggle ${isExpanded ? 'rotated' : ''}" onclick="toggleRow('${item.id}')">keyboard_arrow_down</span>`
                : `<span style="width: 24px;"></span>`;

            const badges = [];
            if (item.type === 'tematica') {
                badges.push(`<span class="badge badge-tematica">Temática</span>`);
            }
            if (item.counters.ia) {
                badges.push(`<span class="badge badge-primary"><span class="material-icons">auto_awesome</span>${item.counters.ia} questões</span>`);
            }
            if (item.counters.blocos) {
                badges.push(`<span class="badge badge-primary"><span class="material-icons">extension</span>${item.counters.blocos} questões</span>`);
            }
            if (item.counters.questoes !== undefined) {
                const badgeClass = item.counters.questoes === 0 ? 'badge-warning' : 'badge-primary';
                badges.push(`<span class="badge ${badgeClass}"><span class="material-icons">quiz</span>${item.counters.questoes} questões</span>`);
            }

            const actions = isChild
                ? `<div class="row-actions">
                    <button class="btn-icon"><span class="material-icons">add_circle</span></button>
                    <button class="btn-icon"><span class="material-icons">auto_awesome</span></button>
                  </div>`
                : '';

            return `
                <div class="table-row level-${level} ${isExpanded ? 'expanded' : ''} ${isChild ? 'indent-1' : ''}" data-id="${item.id}">
                    ${toggleIcon}
                    <div class="row-code">${item.code}</div>
                    <div class="row-content">
                        ${item.title ? `<span class="row-title">${item.title}</span>` : ''}
                        ${item.description ? `<span class="row-description">${item.description}</span>` : ''}
                        ${badges.join('')}
                    </div>
                    ${actions}
                </div>
            `;
        }

        function renderTopicos() {
            const container = document.getElementById('table-topicos');
            container.innerHTML = '';

            topicosData.forEach(item => {
                const isExpanded = window.bancoQuestoesState.expandedRows[item.id];
                renderTopicoRecursive(item, 0, container, isExpanded);
            });

            // Paginação
            container.insertAdjacentHTML('beforeend', `
                <div class="pagination-container">
                    <div class="pagination">
                        <button class="pagination-btn"><span class="material-icons">chevron_left</span></button>
                        <button class="pagination-btn active">1</button>
                        <button class="pagination-btn"><span class="material-icons">chevron_right</span></button>
                    </div>
                </div>
            `);
        }

        function renderTopicoRecursive(item, level, container, isExpanded) {
            const rowHTML = createTopicoRow(item, level, isExpanded);
            container.insertAdjacentHTML('beforeend', rowHTML);

            if (isExpanded && item.children && item.children.length > 0) {
                item.children.forEach(child => {
                    const childExpanded = window.bancoQuestoesState.expandedRows[child.id];
                    renderTopicoRecursive(child, level + 1, container, childExpanded);
                });
            }
        }

        function createTopicoRow(item, level, isExpanded) {
            const hasChildren = item.children && item.children.length > 0;
            const toggleIcon = hasChildren
                ? `<span class="material-icons row-toggle ${isExpanded ? 'rotated' : ''}" onclick="toggleRow('${item.id}')">keyboard_arrow_down</span>`
                : `<span class="material-icons row-toggle" onclick="toggleRow('${item.id}')">keyboard_arrow_down</span>`;

            const badges = [];
            if (item.type === 'tematica') {
                badges.push(`<span class="badge badge-tematica">Temática</span>`);
            } else if (item.type === 'objeto') {
                badges.push(`<span class="badge badge-objeto">Objeto do Conhecimento</span>`);
            }
            if (item.counters.jogos) {
                badges.push(`<span class="badge badge-primary"><span class="material-icons">sports_esports</span>${item.counters.jogos} jogos</span>`);
            }
            if (item.counters.ia) {
                badges.push(`<span class="badge badge-primary"><span class="material-icons">auto_awesome</span>${item.counters.ia} questões</span>`);
            }
            if (item.counters.blocos) {
                badges.push(`<span class="badge badge-primary"><span class="material-icons">extension</span>${item.counters.blocos} questões</span>`);
            }
            if (item.counters.questoes !== undefined) {
                badges.push(`<span class="badge badge-primary"><span class="material-icons">quiz</span>${item.counters.questoes} questões</span>`);
            }

            const actions = level === 2
                ? `<div class="row-actions">
                    <button class="btn-icon"><span class="material-icons">add_circle</span></button>
                    <button class="btn-icon"><span class="material-icons">auto_awesome</span></button>
                  </div>`
                : '';

            const indentClass = level === 1 ? 'indent-1' : level === 2 ? 'indent-2' : '';

            return `
                <div class="table-row level-${level} ${isExpanded ? 'expanded' : ''} ${indentClass}" data-id="${item.id}">
                    ${toggleIcon}
                    <div class="row-code">${item.code}</div>
                    <div class="row-content">
                        <span class="row-title">${item.title}</span>
                        ${badges.join('')}
                    </div>
                    ${actions}
                </div>
            `;
        }

        // ========== EVENT HANDLERS ==========
        function switchTab(tab) {
            window.bancoQuestoesState.activeTab = tab;

            // Update UI
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`[data-tab="${tab}"]`).classList.add('active');

            if (tab === 'habilidades') {
                document.getElementById('table-habilidades').classList.remove('hidden');
                document.getElementById('table-topicos').classList.add('hidden');
                document.getElementById('total-label').innerHTML = 'Total de Questões: <strong id="total-count">949</strong>';
            } else {
                document.getElementById('table-habilidades').classList.add('hidden');
                document.getElementById('table-topicos').classList.remove('hidden');
                document.getElementById('total-label').innerHTML = 'Total de tópicos: <strong id="total-count">13</strong>';
            }

            // Persist
            localStorage.setItem('bancoQuestoesTab', tab);
        }

        function toggleRow(id) {
            const isExpanded = window.bancoQuestoesState.expandedRows[id];
            window.bancoQuestoesState.expandedRows[id] = !isExpanded;

            // Re-render
            if (window.bancoQuestoesState.activeTab === 'habilidades') {
                renderHabilidades();
            } else {
                renderTopicos();
            }

            // Persist
            localStorage.setItem('bancoQuestoesExpanded', JSON.stringify(window.bancoQuestoesState.expandedRows));
        }

        // ========== INIT ==========
        window.addEventListener('DOMContentLoaded', () => {
            // Restore state
            const savedTab = localStorage.getItem('bancoQuestoesTab');
            if (savedTab) {
                switchTab(savedTab);
            }

            const savedExpanded = localStorage.getItem('bancoQuestoesExpanded');
            if (savedExpanded) {
                window.bancoQuestoesState.expandedRows = JSON.parse(savedExpanded);
            }

            // Render
            renderHabilidades();
            renderTopicos();

            console.info('[Banco de Questões] Inicializado');
        });
    </script>
</body>

</html>